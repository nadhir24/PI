var priceFormatter = {
    currencies: {
        "AU": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "AUD"
        },
        "US": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "USD"
        },
        "UU": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "USD"
        },
        "NZ": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "NZD"
        },
        "CA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CAD"
        },
        "GB": {
            "Symbol": "£",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "GBP"
        },
        "IE": {
            "Symbol": "€",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "DE": {
            "Symbol": "€",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "AT": {
            "Symbol": "€",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "CH": {
            "Symbol": "CHF",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": "’",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CHF"
        },
        "FR": {
            "Symbol": "€",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": " ",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "ES": {
            "Symbol": "€",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "IT": {
            "Symbol": "€",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "DK": {
            "Symbol": "kr",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "DKK"
        },
        "FI": {
            "Symbol": "€",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": " ",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "SE": {
            "Symbol": "kr",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": " ",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "SEK"
        },
        "NL": {
            "Symbol": "€",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "NO": {
            "Symbol": "kr",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": " ",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "NOK"
        },
        "BE": {
            "Symbol": "€",
            "ShowCurrencyLast": true,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "BR": {
            "Symbol": "R$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "BRL"
        },
        "CO": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "COP"
        },
        "MY": {
            "Symbol": "RM",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "MYR"
        },
        "SG": {
            "Symbol": "SG$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "SGD"
        },
        "MX": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "MXN"
        },
        "AR": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": ",",
            "DecimalCount": 2,
            "IsoCode": "ARS"
        },
        "CL": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ".",
            "DecimalSeparator": "",
            "DecimalCount": 0,
            "IsoCode": "CLP"
        },
        "HK": {
            "Symbol": "HK$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "HKD"
        },
        "KR": {
            "Symbol": "₩",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": "",
            "DecimalCount": 0,
            "IsoCode": "KRW"
        },
        "TW": {
            "Symbol": "NT$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": "",
            "DecimalCount": 0,
            "IsoCode": "TWD"
        },
        "IN": {
            "Symbol": "₹",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": "",
            "DecimalCount": 0,
            "IsoCode": "INR"
        },
        "JP": {
            "Symbol": "￥",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": "",
            "DecimalCount": 0,
            "IsoCode": "JPY"
        },
        "PT": {
            "Symbol": "€",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "BD": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "BTN"
        },
        "BY": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "BYR"
        },
        "BO": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "BOB"
        },
        "BG": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "BGN"
        },
        "CR": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CRC"
        },
        "HR": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "HRK"
        },
        "CY": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CYP"
        },
        "CZ": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CZK"
        },
        "DO": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "DOP"
        },
        "EC": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "ECS"
        },
        "EG": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EGP"
        },
        "SV": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "SVC"
        },
        "EE": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "GR": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "GT": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "GTQ"
        },
        "HN": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "HNL"
        },
        "ID": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "IDR"
        },
        "HU": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "HUF"
        },
        "IL": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "ILS"
        },
        "LV": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "LVL"
        },
        "LT": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "LTL"
        },
        "LU": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "MO": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "MOP"
        },
        "MN": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "MNT"
        },
        "MA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "MAD"
        },
        "NI": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "NIO"
        },
        "NG": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "NGN"
        },
        "PA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "PAB"
        },
        "PY": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "PYG"
        },
        "PH": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "PHP"
        },
        "PL": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "PLN"
        },
        "RU": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "RUB"
        },
        "RO": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "RON"
        },
        "SA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "SAR"
        },
        "RS": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "RSD"
        },
        "SK": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "EUR"
        },
        "SI": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "SIT"
        },
        "ZA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "ZAR"
        },
        "LK": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "LKR"
        },
        "TR": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "TRY"
        },
        "UA": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "UAH"
        },
        "AE": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "AED"
        },
        "UY": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "UYU"
        },
        "VE": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "VEF"
        },
        "VN": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "VND"
        },
        "CN": {
            "Symbol": "$",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "CNY"
        },
        "TH": {
            "Symbol": "฿",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "THB"
        },
        "PE": {
            "Symbol": "S/",
            "ShowCurrencyLast": false,
            "GroupSize": 3,
            "GroupSeparator": ",",
            "DecimalSeparator": ".",
            "DecimalCount": 2,
            "IsoCode": "PEN"
        }
    }
};

(function () {
    priceFormatter.round = function (price, country) {
        if (typeof price !== 'number' || isNaN(price) || !priceFormatter.currencies) return null;

        var currency = priceFormatter.currencies[country.toUpperCase()];
        var decimalCount = 2;
        if (typeof currency.DecimalCount === 'number' && !isNaN(currency.DecimalCount)) {
            decimalCount = currency.DecimalCount;
        };

        var fixedPrice = price * Math.pow(10, decimalCount);
        fixedPrice = Math.round(fixedPrice);
        fixedPrice = fixedPrice / Math.pow(10, decimalCount);
        return fixedPrice;
    };

    priceFormatter.decimalCount = function (country) {

        var decimalCount = 2;
        if (!priceFormatter.currencies) {
            return decimalCount;
        }

        var currency = priceFormatter.currencies[country.toUpperCase()];
        if (!currency) {
            return decimalCount;
        }

        if (typeof currency.DecimalCount === 'number' && !isNaN(currency.DecimalCount)) {
            decimalCount = currency.DecimalCount;
        };
        return decimalCount;
    };

    priceFormatter.format = function (price, country) {
        if (typeof price !== 'number' || isNaN(price) || !priceFormatter.currencies) return null;

        var decimalCount = priceFormatter.decimalCount(country);

        var currency = priceFormatter.currencies[country.toUpperCase()];
        if (!currency || !currency.Symbol) {
            return price.toFixed(decimalCount);
        }

        var priceArr = Math.abs(price).toFixed(decimalCount).split(".");
        var integerChars = priceArr[0].split("").reverse();
        var resultIntegerChars = [];
        for (var i = 0; i < integerChars.length; i++) {
            if (i > 0 && i % currency.GroupSize == 0) {
                resultIntegerChars.push(currency.GroupSeparator);
            }
            resultIntegerChars.push(integerChars[i]);
        }

        var result = resultIntegerChars.reverse().join("");

        if (priceArr.length > 1 && currency.DecimalSeparator) {
            result += currency.DecimalSeparator;
            result += priceArr[1];
        }

        if (currency.ShowCurrencyLast) {
            result += currency.Symbol;
        } else {
            result = currency.Symbol + result;
        }

        if (price < 0) {
            result = "-" + result;
        }

        return result;
    };

    priceFormatter.getIsoCodeByCountry = function (countryCode) {
        if (typeof countryCode !== 'string' || !priceFormatter.currencies) return null;
        var currency = priceFormatter.currencies[countryCode.toUpperCase()];
        if (!currency || !currency.IsoCode) {
            return null;
        }
        return currency.IsoCode;
    };

})(priceFormatter);

window.priceFormatter = priceFormatter;
